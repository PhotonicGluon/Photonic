---
import ProjectCard from "@components/projects/ProjectCard.astro";
import MainLayout from "@layouts/MainLayout.astro";
import { toProject } from "@lib/projects/project";
import { ProjectTag } from "@lib/projects/tag";
import { getCollection } from "astro:content";

const projects = await getCollection("projects");
const tags = Object.values(ProjectTag);
---

<MainLayout title="Projects">
    <section id="filters" class="sticky top-3 col-span-1 col-start-1 self-start">
        <span class="block font-bold">Search</span>
        <div>(Future search box...)</div>
        <span class="block pt-3 font-bold">Tags</span>
        <div id="tags">
            {
                tags.map((tag) => {
                    const checkboxID = "filter-tag-" + tag.name.toLowerCase();
                    return (
                        <div class="flex items-center">
                            <input
                                id={checkboxID}
                                type="checkbox"
                                class="h-4 w-4 rounded border-gray-300 bg-gray-100 text-blue-600 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800 dark:focus:ring-blue-600"
                            />
                            <label for={checkboxID} class="ms-2 text-sm font-medium">
                                {tag.name}
                            </label>
                        </div>
                    );
                })
            }
        </div>
        <span class="block pt-3 font-bold">Sorting</span>
        <div>List of sorting options...</div>
    </section>
    <section id="projects" class="col-span-4 col-start-2 grid grid-cols-3 gap-4">
        {projects.map((rawProject) => <ProjectCard id={rawProject.id} project={toProject(rawProject.data)} />)}
    </section>
</MainLayout>

<style is:global>
    main {
        @apply grid grid-cols-5 divide-x-2 divide-solid divide-gray-500;
    }
</style>
